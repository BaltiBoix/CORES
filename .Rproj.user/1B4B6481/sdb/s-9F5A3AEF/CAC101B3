{
    "contents" : "proy<-function(){\n      \n      if(!exists(\"lee\")) source('~/Solomon/lee.R')\n      if(!exists(\"clin\")) source('~/Solomon/clin.R')\n      if(!exists(\"qrgl\")) lee()\n      \n      ordenAlcance<-c(\"Iberia\",  \"Western Europe\", \"France\", \"Italy\", \"Benelux\", \"Britain and Ireland\",\n                      \"Inland Europe\",\"Scandinavia\", \"Central and Southern Europe\" ,\"The Middle East\", \"Total Study\",\n                      \"Hydroskimming/Thermal\", \"GOC1\", \"GOC2\", \"GOC3\", \"GOC4\", \n                      \"Atlantic Coast\", \"Western Mediterranean\") #, \"United States\", \"US East Coast & US Gulf Coast\")\n      \n      ordenArea<-c(\"Financial\", \"Cash Operating Expenses\", \"Energy\", \"Reliability and Maintenance\", \"Personnel\", \"Process\")\n\n      qrglmolt<-melt(qrgl, id.vars = 1:3, variable.name = \"cuartil\", value.name = \"valor\")\n      valmolt<-melt(val, id.vars = 1:2, variable.name = \"centro\", value.name = \"valor\")\n            \n      qrglmolt$Alcance<-factor(qrglmolt$Alcance, levels = ordenAlcance[length(ordenAlcance):1])\n      qrglmolt$Area<-factor(qrglmolt$Area, levels = ordenArea)\n      valmolt$Area<-factor(valmolt$Area, levels = ordenArea)\n      qrglmolt$Item<-as.factor(qrglmolt$Item)\n      valmolt$Item<-as.factor(valmolt$Item)\n      \n      qrglmolt<-qrglmolt[order(qrglmolt$Alcance, qrglmolt$Area, qrglmolt$Item, qrglmolt$cuartil),]\n      valmolt<-valmolt[order(valmolt$Area, valmolt$Item),]\n      \n      for(i in 2:length(qrglmolt$valor)){\n            if(qrglmolt$valor[i] == 0) qrglmolt$valor[i]<-qrglmolt$valor[i+1]\n            if(qrglmolt$valor[i] == 0) qrglmolt$valor[i]<-qrglmolt$valor[i+2]\n            if(qrglmolt$valor[i] == 0) qrglmolt$valor[i]<-qrglmolt$valor[i+3]\n      }\n            \n      \n      qrglmolt<<-qrglmolt\n      valmolt<<-valmolt\n      \n      qrglmolt<-subset(qrglmolt, qrglmolt$Alcance != \"Total Study\")\n      qrglmolt<-subset(qrglmolt, qrglmolt$Alcance != \"Central and Southern Europe\")\n      qrglmolt<-subset(qrglmolt, qrglmolt$Alcance != \"The Middle East\")\n      qrglmolt<-subset(qrglmolt, !(qrglmolt$Alcance == \"Atlantic Coast\" & qrglmolt$Area == \"Personnel\"))\n      qrglmolt<-subset(qrglmolt, !(qrglmolt$Item == \"Process Efficiency Index\"))\n      valmolt<-subset(valmolt, !(valmolt$Item == \"Process Efficiency Index\"))\n      \n      levels(qrglmolt$Item)<-clin(levels(qrglmolt$Item),22)\n      levels(valmolt$Item)<-clin(levels(valmolt$Item),22)\n      \n      pdf(\"a4_output.pdf\", pointsize=4)\n      for(i in 1:length(ordenArea)){\n            qrglmolti<-subset(qrglmolt, qrglmolt$Area==ordenArea[i])\n            valmolti<-subset(valmolt, valmolt$Area==ordenArea[i])\n            \n            p<-ggplot()\n            p<-p+geom_path(data=subset(qrglmolti, cuartil==\"p1\" | cuartil==\"p2\"), aes(x=valor, y=Alcance), colour=\"green\", size=3)\n            p<-p+geom_path(data=subset(qrglmolti, cuartil==\"p2\" | cuartil==\"p3\"), aes(x=valor, y=Alcance), colour=\"yellowgreen\", size=3)\n            p<-p+geom_path(data=subset(qrglmolti, cuartil==\"p3\" | cuartil==\"p4\"), aes(x=valor, y=Alcance), colour=\"pink\", size=3)\n            p<-p+geom_path(data=subset(qrglmolti, cuartil==\"p4\" | cuartil==\"p5\"), aes(x=valor, y=Alcance), colour=\"red\", size=3)\n            p<-p+facet_wrap(~ Item, ncol=6, scales = \"free_x\")\n            p<-p+geom_vline(data=subset(valmolti, centro==\"TARRAGONA\"),aes(xintercept=valor, color=centro), width=2, show_guide = T)\n            p<-p+geom_vline(data=subset(valmolti, centro==\"REPSOL\"),aes(xintercept=valor, color=centro), width=1, show_guide = T)\n            p<-p+geom_vline(data=subset(valmolti, centro==\"CARTAGENA\"),aes(xintercept=valor, color=centro), width=1, show_guide = T)\n            p<-p+ggtitle(paste(\"EUR14 Solomon\", \"\\n\", qrglmolti$Area[1]))\n            p<-p+theme(axis.title.x=element_blank(), axis.title.y=element_blank(), \n                       plot.title = element_text(hjust = 0.5, size = 8),\n                       axis.text = element_text(size=6), \n                       strip.text.x = element_text(size=6),\n                       strip.background = element_rect(colour = \"black\", size=0.25),\n                       panel.border = element_rect(fill=NA, colour = \"black\", size=0.5),\n                       legend.title=element_blank(),\n                       legend.text = element_text(size=8),\n                       legend.position = \"bottom\")\n            #p<-p+annotate(\"text\", label = \"Tarragona\", x = 2.5, y = 0, size = 5, colour = \"blue\")\n            plot(p)\n      }\n      dev.off()\n}",
    "created" : 1445678441101.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3759110600",
    "id" : "CAC101B3",
    "lastKnownWriteTime" : 1444758808,
    "path" : "~/Solomon/proy.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "type" : "r_source"
}